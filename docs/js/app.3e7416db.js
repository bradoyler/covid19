(function(e){function t(t){for(var n,c,u=t[0],i=t[1],p=t[2],l=0,d=[];l<u.length;l++)c=u[l],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);s&&s(t);while(d.length)d.shift()();return a.push.apply(a,p||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,u=1;u<r.length;u++){var i=r[u];0!==o[i]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},o={app:0},a=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var s=i;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),o=r.n(n);o.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e623"),r("e379"),r("5dc8"),r("37e1");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e.reports.length?r("MainMap",{attrs:{coords:e.coords,reports:e.reports}}):e._e()],1)},a=[],c=(r("99af"),r("7db0"),r("d81d"),r("a9e3"),r("d3b7"),r("3ca3"),r("ddb0"),r("5626")),u=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{attrs:{id:"map"}})])}],p=(r("fb6a"),r("595b")),s={name:"Map",props:["coords","reports"],data:function(){return{reportDate:"4/2/20"}},methods:{setLocation:function(e,t){(new mapboxgl.Marker).setLngLat(t).addTo(e)},buildGeoJson:function(){var e=this;return p["featureCollection"](this.reports.map((function(t){var r=Math.round(Number(t[e.reportDate])),n={cases:r,FIPS:t.FIPS,pop:0,rate:0};if(t.pop){var o=Math.round(r/(t.pop/1e4));n.html="<strong>".concat(t.Admin2,", ").concat(t.Province_State,"</strong>\n                             <p>Population: ").concat(t.pop,", Cases: ").concat(r,", Per 10k: ").concat(o,"</p>"),n.rate=o,n.pop=t.pop}return p["point"]([t.Long_,t.Lat],n)})))},addHover:function(e){var t=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});e.on("mouseenter","report",(function(r){e.getCanvas().style.cursor="pointer";var n=r.features[0].properties.html,o=r.features[0].geometry.coordinates.slice();t.setLngLat(o).setHTML(n).addTo(e)})),e.on("mouseleave","report",(function(){e.getCanvas().style.cursor="",t.remove()}))},addLayer:function(e,t){e.addSource("report",{type:"geojson",data:t}),e.addLayer({id:"report",type:"circle",source:"report",paint:{"circle-stroke-color":"grey","circle-stroke-width":1,"circle-opacity":1,"circle-radius":["step",["get","rate"],0,2,2,6,4,10,5,100,6,200,10,250,12.5],"circle-color":"rgb(165,15,21)"}})}},mounted:function(){mapboxgl.accessToken=window.mapbox_token;var e=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/dark-v10",center:[-95.83,38.477],zoom:3.5});window.map=e;var t=this;e.on("load",(function(){t.addLayer(e,t.buildGeoJson()),t.addHover(e)}))}},l=s,d=r("2877"),f=Object(d["a"])(l,u,i,!1,null,"7fd0d92d",null),m=f.exports,v={name:"App",components:{MainMap:m},mounted:function(){console.log("appppp"),this.loadData()},methods:{loadData:function(){var e=this;Promise.all(["cases-us.csv","counties.csv"].map((function(e){return fetch(e).then((function(e){return e.ok?e.text():Promise.reject(e.status)})).then((function(e){return Object(c["a"])(e)}))}))).then((function(t){var r=t[0],n=t[1];e.reports=r.map((function(e){var t=Math.round(Number(e.FIPS)),r=n.find((function(e){return t===+"".concat(e.STATE).concat(e.COUNTY)}));return r?e.pop=Number(r.POPESTIMATE2019):console.log("no match:",e.Admin2,e.FIPS),e}))}))}},data:function(){return{location:"",coords:"aaa",counties:[],reports:[]}}},b=v,h=(r("034f"),Object(d["a"])(b,o,a,!1,null,null,null)),g=h.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(g)}}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.3e7416db.js.map